var id = 'undefined' == typeof window
  ? require('..')
  : require('object-id'); // how to do this better?

var assert = require('assert');

describe('objectId', function(){
  beforeEach(function(){
    id.id = 1; // reset
  });
  
  it('should generate non-enumerable id', function(){
    var obj = { foo: 'bar' };
    id(obj);
    id(obj);
    // for non-IE
    assert(1 === obj.__id__);
    assert(2 === id.id);

    for (var name in obj) {
      if (obj.hasOwnProperty(name))
        assert('__id__' !== name);
    }
  });

  it('should generate incremental id', function(){
    var a = { one: 'two' };
    var b = { three: 'four' };
    id(a);
    id(b);
    assert(1 === a.__id__);
    assert(2 === b.__id__);
  });
});
